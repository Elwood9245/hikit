{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid mt-5">
  <div class="row">

    <!-- Left Profile Column -->
    <div class="col-md-3 text-center">
      <img src="{% static 'image/tintin.png' %}" class="rounded-circle mb-3" alt="Profile Avatar" width="120">
      <form method="POST" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-dark w-75">Log out</button>
      </form>
    </div>

    <!-- Activities Section -->
    <div class="col-md-9 d-flex justify-content-around flex-wrap gap-4">

      <!-- Launched Routes -->
      <div class="card text-center" style="width: 18rem;">
        <div class="card-header fw-bold">My Routes</div>
        <div class="card-body">
          <div class="mb-2">&#x25B2;</div>  <!-- Up arrow ▲ -->

         <!-- debug block -->
         <p style="color: red;">Found {{ launched_routes|length }} launched route(s)</p>

          {% for route in launched_routes %}
            <p style="color: blue;">TITLE: {{ route.title }}</p>
            <p>HAS IMAGE? {% if route.image %} ✅ {% else %} ❌ {% endif %}</p>


            {% if route.image %}
              <img src="{{ route.image.url }}" class="img-fluid rounded mb-2" alt="{{ route.title }}">
            {% endif %}
            <p>{{ route.title }}</p>
          {% empty %}
            <p class="text-muted">No launched routes.</p>
          {% endfor %}
          <div class="mt-2">&#x25BC;</div>  <!-- Down arrow ▼ -->
        </div>
      </div>

          <!-- Launched Events -->
      <div class="card text-center" style="width: 18rem;">
        <div class="card-header fw-bold">Launched Events</div>
        <div class="card-body">
          <div class="mb-2">&#x25B2;</div>  <!-- Up arrow ▲ -->
          {% for event in launched_events %}
            {% if event.image %}
              <img src="{{ event.image.url }}" class="img-fluid rounded mb-2" alt="{{ event.title }}">
            {% endif %}
            <p>{{ event.title }}</p>
          {% empty %}
            <p class="text-muted">No launched events.</p>
          {% endfor %}
          <div class="mt-2">&#x25BC;</div>  <!-- Down arrow ▼ -->
        </div>
      </div>

      <!-- Saved Routes -->
      <div class="card text-center" style="width: 18rem;">
        <div class="card-header fw-bold">Saved Routes</div>
        <div class="card-body">
          <div class="mb-2">&#x25B2;</div>
          {% for route in saved_routes %}
            {% if route.image %}
              <img src="{{ route.image.url }}" class="img-fluid rounded mb-2" alt="{{ route.title }}">
              <p>{{ route.title }}</p>
            {% endif %}
          {% empty %}
            <p class="text-muted">No saved activities.</p>
          {% endfor %}
          <div class="mt-2">&#x25BC;</div>
        </div>
      </div>

      <!-- Past Activities -->
      <div class="card text-center" style="width: 18rem;">
        <div class="card-header fw-bold">Past Activities</div>
        <div class="card-body">
          <div class="mb-2">&#x25B2;</div>
          {% for route in past_routes %}
            {% if route.image %}
              <img src="{{ route.image.url }}" class="img-fluid rounded mb-2" alt="{{ route.title }}">
              <p>{{ route.title }}</p>
            {% endif %}
          {% empty %}
            <p class="text-muted">No past activities.</p>
          {% endfor %}
          <div class="mt-2">&#x25BC;</div>
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}
